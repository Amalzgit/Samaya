<section class="content-main">
    <div class="content-header">
        <div>
            <h2 class="content-title card-title">Edit Category</h2>
            <p>Edit your category details</p>
        </div>
    </div>
    <div class="card mb-4">
        <header class="card-header"></header>

        <div class="card-body">
            <% if (successMessage) { %>
                <div class="alert alert-success">
                    <%= successMessage %>
                </div>
            <% } %>

            <% if (errorMessage) { %>
                <div class="alert alert-danger">
                    <%= errorMessage %>
                </div>
            <% } %>

            <form id="editCategoryForm" action="/admin/edit-category/<%= category._id %>" method="post">
                <article class="itemlist">
                    <div class="row align-items-center">
                        <div class="col-lg-4 col-sm-4 col-8 flex-grow-1 col-name">
                            <label for="categoryName" class="form-label">Category Name</label>
                            <input type="text" id="categoryName" name="name" class="form-control" value="<%= category.name %>" placeholder="Enter category name" >
                            <div id="categoryNameError" class="invalid-feedback"></div>
                        </div>
                        <div class="col-lg-2 col-sm-2 col-4 col-deleted">
                            <label for="categoryDeleted" class="form-label">Deleted</label>
                            <select id="categoryDeleted" name="deleted" class="form-select" >
                                <option value="false" <% if (!category.deleted) { %>selected<% } %>>No</option>
                                <option value="true" <% if (category.deleted) { %>selected<% } %>>Yes</option>
                            </select>
                            <div id="categoryDeletedError" class="invalid-feedback"></div>
                        </div>
                        <div class="col-lg-4 col-sm-4 col-8 flex-grow-1 col-description">
                            <label for="categoryDescription" class="form-label">Description</label>
                            <textarea id="categoryDescription" name="description" class="form-control" rows="3" placeholder="Enter category description" ><%= category.description %></textarea>
                            <div id="categoryDescriptionError" class="invalid-feedback"></div>
                        </div>
                    </div>
                </article>
                <div class="row align-items-center mt-3">
                    <div class="col-lg-12 col-sm-12 col-12 text-end">
                        <button type="submit" class="btn btn-primary">Update Category</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>

<script>


    document.addEventListener("DOMContentLoaded", () => {
     
      const nameInput = document.getElementById('name');
      const descriptionInput = document.getElementById('description');
     
      const nameError = document.getElementById('nameError');
      const descriptionError = document.getElementById('descriptionError');
  
     
  
      const validatename = () => {
        if (nameInput.value.trim() === '') {
          nameError.textContent = '* Last name required';
          return false;
        } else {
          nameError.textContent = '';
          return true;
        }
      }
  
  
  
      const validatedescription = () => {
        if (Input.value.trim() === '') {
          Error.textContent = '* Description is  required';
          return false;
        } else {
          Error.textContent = '';
          return true;
        }
      }
  
      
  
      nameInput.addEventListener('input', validatename);
      descriptionInput.addEventListener('input', validatedescription);
  
      const form = document.getElementById('formData');
  
      form.addEventListener('submit', (event) => {
        if ( !validatename() ||  !validatedescription() ) {
          event.preventDefault();
        }
      });
    });
  </script>